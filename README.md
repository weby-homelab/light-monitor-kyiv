# light-monitor-kyiv (Extended Fork)

[![Check Outages](https://img.shields.io/github/actions/workflow/status/weby-homelab/light-monitor-kyiv/check_outages.yml?label=Check%20Outages&style=flat-square)](https://github.com/weby-homelab/light-monitor-kyiv/actions/workflows/check_outages.yml)
[![Python](https://img.shields.io/badge/python-3.10%2B-blue?style=flat-square)](https://www.python.org/)
[![License](https://img.shields.io/github/license/weby-homelab/light-monitor-kyiv?style=flat-square)](LICENSE)

–¶–µ –∑–Ω–∞—á–Ω–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è (—Ñ–æ—Ä–∫) –ø—Ä–æ–µ–∫—Ç—É [banditByte/light-monitor-kyiv](https://github.com/banditByte/light-monitor-kyiv).
–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å. –¶–µ–π —Ñ–æ—Ä–∫ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —Å–∏—Å—Ç–µ–º—É **–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –µ–Ω–µ—Ä–≥–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è** –∑ –≥–ª–∏–±–æ–∫–æ—é –∞–Ω–∞–ª—ñ—Ç–∏–∫–æ—é "–û—á—ñ–∫—É–≤–∞–Ω–Ω—è/–†–µ–∞–ª—å–Ω—ñ—Å—Ç—å".

## üåü –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

1.  **–†–æ–∑—É–º–Ω—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:**
    *   –ú–∏—Ç—Ç—î–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: `üî¥ –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ!` —Ç–∞ `üü¢ –°–≤—ñ—Ç–ª–æ –∑'—è–≤–∏–ª–æ—Å—è`.
    *   **–ê–Ω–∞–ª—ñ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –≥—Ä–∞—Ñ—ñ–∫—É:** –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è.
        *   *–ü—Ä–∏–∫–ª–∞–¥:* "‚ö†Ô∏è –ó–∞–ø—ñ–∑–Ω–µ–Ω–Ω—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è: 15 —Ö–≤" –∞–±–æ "‚è± –í–∏–º–∫–Ω–µ–Ω–Ω—è —Ä–∞–Ω—ñ—à–µ –Ω–∞: 10 —Ö–≤".
        *   –†–æ–∑—É–º—ñ—î –∫–æ–Ω—Ç–µ–∫—Å—Ç: "–ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º –ù–ï –º–∞–ª–æ –±—É—Ç–∏ —Å–≤—ñ—Ç–ª–∞, –∞–ª–µ –Ω–∞–º —â–∞—Å—Ç–∏—Ç—å".
2.  **Dark Mode –ó–≤—ñ—Ç–∏ (New):**
    *   –í—Å—ñ –≥—Ä–∞—Ñ—ñ—á–Ω—ñ –∑–≤—ñ—Ç–∏ —Ç–µ–ø–µ—Ä —É —Å—Ç–∏–ª—å–Ω–æ–º—É **—Ç–µ–º–Ω–æ–º—É –¥–∏–∑–∞–π–Ω—ñ** (#2E2E2E) –∑ –ø–∞—Å—Ç–µ–ª—å–Ω–∏–º–∏ –∫–æ–ª—å–æ—Ä–∞–º–∏ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è.
    *   **–©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç:** –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ–±–∏, –¥–µ –Ω–∞ –æ–¥–Ω—ñ–π —á–∞—Å–æ–≤—ñ–π —à–∫–∞–ª—ñ –∑—ñ—Å—Ç–∞–≤–ª–µ–Ω–æ –ü–ª–∞–Ω (–∑–Ω–∏–∑—É) —Ç–∞ –§–∞–∫—Ç (–∑–≤–µ—Ä—Ö—É).
    *   **–¢–∏–∂–Ω–µ–≤–∏–π –∑–≤—ñ—Ç:** –ó–≤–µ–¥–µ–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ –∑–∞ 7 –¥–Ω—ñ–≤ –∑ "–ø—Ä–∏–∫–ª–µ—î–Ω–∏–º–∏" —Å–º—É–∂–∫–∞–º–∏ –ø–ª–∞–Ω—É –¥–æ –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è.
3.  **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ "–ü–ª–∞–Ω vs –§–∞–∫—Ç" (New):**
    *   –£ —Ç–∏–∂–Ω–µ–≤–æ–º—É –∑–≤—ñ—Ç—ñ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –±–∞–ª–∞–Ω—Å —á–∞—Å—É: —Å–∫—ñ–ª—å–∫–∏ –≥–æ–¥–∏–Ω —Å–≤—ñ—Ç–ª–∞ –±—É–ª–æ –∑–∞ –ø–ª–∞–Ω–æ–º, –∞ —Å–∫—ñ–ª—å–∫–∏ —Ñ–∞–∫—Ç–∏—á–Ω–æ.
    *   –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è "–ù–∞–π–∫—Ä–∞—â–æ–≥–æ" —Ç–∞ "–ù–∞–π–≤–∞–∂—á–æ–≥–æ" –¥–Ω—è —Ç–∏–∂–Ω—è –∑–∞ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –ø–æ–∫–∞–∑–Ω–∏–∫–∞–º–∏.
4.  **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –¥–∂–µ—Ä–µ–ª:** –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–∞–Ω–∏—Ö –∑ Github (API) —Ç–∞ Yasno.

## üìä –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è

–°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä—É—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É —Ç–µ–º–Ω—ñ–π —Ç–µ–º—ñ:
*   üü¢ **–ó–µ–ª–µ–Ω–∏–π:** –°–≤—ñ—Ç–ª–æ —î (—Ñ–∞–∫—Ç–∏—á–Ω–æ).
*   üü• **–ü–∞—Å—Ç–µ–ª—å–Ω–∏–π —á–µ—Ä–≤–æ–Ω–∏–π:** –°–≤—ñ—Ç–ª–∞ –Ω–µ–º–∞—î (—Ñ–∞–∫—Ç–∏—á–Ω–æ).
*   üü° **–ñ–æ–≤—Ç–∏–π (–≤—É–∑—å–∫–∞ —Å–º—É–≥–∞):** –ü–ª–∞–Ω–æ–≤–µ –≤–∫–ª—é—á–µ–Ω–Ω—è.
*   ‚¨ú **–°—ñ—Ä–∏–π (–≤—É–∑—å–∫–∞ —Å–º—É–≥–∞):** –ü–ª–∞–Ω–æ–≤–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –º–∏—Ç—Ç—î–≤–æ –ø–æ–±–∞—á–∏—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ –æ–±—ñ—Ü—è–Ω–∫–∞–º–∏ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫—ñ–≤ —Ç–∞ —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—é.

## üõ† –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–ü—Ä–æ–µ–∫—Ç —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ –Ω–∞ —Ä–æ–±–æ—Ç—É –≤ —Ä–µ–∂–∏–º—ñ 24/7 (VPS, Raspberry Pi).

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è

```bash
git clone https://github.com/weby-homelab/light-monitor-kyiv.git
cd light-monitor-kyiv
```

### 2. –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –°–∫–æ–ø—ñ—é–π—Ç–µ `run_light_monitor.example.sh` –≤ `run_light_monitor.sh` —Ç–∞ –ø—Ä–æ–ø–∏—à—ñ—Ç—å —à–ª—è—Ö–∏.
2. –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª (—Å—Ç–≤–æ—Ä—ñ—Ç—å –π–æ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–º—ñ–Ω–Ω–∏—Ö –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –∞–±–æ –µ–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ —ó—Ö):
   * `TELEGRAM_BOT_TOKEN`: –¢–æ–∫–µ–Ω –±–æ—Ç–∞.
   * `TELEGRAM_CHANNEL_ID`: ID —á–∞—Ç—É (–ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –∫–∞–Ω–∞–ª–∏, –≥—Ä—É–ø–∏).
3. `config.json`: –í–∫–∞–∂—ñ—Ç—å –≤–∞—à—É –≥—Ä—É–ø—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `GPV36.1`).

### 4. –ó–∞–ø—É—Å–∫ (Cron)

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥ (`crontab -e`):

```cron
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω—å –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (—â–æ–≥–æ–¥–∏–Ω–∏)
0 * * * * /root/geminicli/light-monitor-kyiv/run_light_monitor.sh >> /var/log/light_monitor.log 2>&1

# –©–æ–¥–µ–Ω–Ω–∏–π –≥—Ä–∞—Ñ—ñ—á–Ω–∏–π –∑–≤—ñ—Ç (23:55)
55 23 * * * /root/geminicli/light-monitor-kyiv/run_daily_report.sh

# –¢–∏–∂–Ω–µ–≤–∏–π –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –∑–≤—ñ—Ç (–ù–µ–¥—ñ–ª—è 23:55)
55 23 * * 0 /root/geminicli/light-monitor-kyiv/run_weekly_report.sh
```

### 5. –°–µ—Ä–≤—ñ—Å –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (Power Monitor)

–î–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É (Up/Down) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `power_monitor_server.py`. –ô–æ–≥–æ –∑—Ä—É—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —è–∫ systemd —Å–µ—Ä–≤—ñ—Å. –í—ñ–Ω "—Å–ª—É—Ö–∞—î" –ø—ñ–Ω–≥ –∞–±–æ –∑–∞–ø–∏—Ç –≤—ñ–¥ –≤–∞—à–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞/—Å–µ—Ä–≤–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ.

–ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—É –ø–æ–¥—ñ–π (`event_log.json`) —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—ó –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (`schedule_history.json`) –Ω–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

*   `power_monitor_server.py`: "–ú–æ–∑–æ–∫" —Å–∏—Å—Ç–µ–º–∏. –í—ñ–¥—Å—Ç–µ–∂—É—î —Å—Ç–∞–Ω, —à–ª–µ –º–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è, —Ä–∞—Ö—É—î –∑–∞—Ç—Ä–∏–º–∫–∏.
*   `generate_daily_report.py`: –ú–∞–ª—é–≤–∞–Ω–Ω—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≥—Ä–∞—Ñ—ñ–∫–∞ –∑–∞ –¥–µ–Ω—å (Dark Mode).
*   `generate_weekly_report.py`: –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ —ñ–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å.
*   `schedule_history.json`: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø–ª–∞–Ω–æ–≤–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (–¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è).

## ü§ù –ü–æ–¥—è–∫–∞

*   [banditByte](https://github.com/banditByte) –∑–∞ –æ—Å–Ω–æ–≤—É –ø–∞—Ä—Å–µ—Ä–∞.
*   –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –∑–∞ —ñ–¥–µ—ó —â–æ–¥–æ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è UI/UX.

---
**License:** MIT
