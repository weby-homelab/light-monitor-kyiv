# üá∫üá¶ Light Monitor Kyiv (Extended)

[![Check Outages](https://img.shields.io/github/actions/workflow/status/weby-homelab/light-monitor-kyiv/check_outages.yml?label=Check%20Outages&style=flat-square)](https://github.com/weby-homelab/light-monitor-kyiv/actions/workflows/check_outages.yml)
[![Python](https://img.shields.io/badge/python-3.10%2B-blue?style=flat-square)](https://www.python.org/)
[![License](https://img.shields.io/github/license/weby-homelab/light-monitor-kyiv?style=flat-square)](LICENSE)

–¶–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è –¥–ª—è –ö–∏—î–≤–∞ (—Ç–∞ —ñ–Ω—à–∏—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è Yasno/GitHub –¥–∂–µ—Ä–µ–ª–∞–º–∏).
–ü—Ä–æ–µ–∫—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—É—î –≥—Ä–∞—Ñ—ñ–∫–∏, –∞ **–ø–æ—Ä—ñ–≤–Ω—é—î –æ–±—ñ—Ü—è–Ω–∫–∏ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫—ñ–≤ –∑ —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—é**, –≥–µ–Ω–µ—Ä—É—î –∫—Ä–∞—Å–∏–≤—ñ –∑–≤—ñ—Ç–∏ —Ç–∞ –º–∏—Ç—Ç—î–≤–æ —Å–ø–æ–≤—ñ—â–∞—î –ø—Ä–æ –∑–º—ñ–Ω–∏.

---

## üåü –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### 1. üîç –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É (Power Monitor)
*   **–ú–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:** –ù–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `üî¥ –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ` —Ç–∞ `üü¢ –°–≤—ñ—Ç–ª–æ –∑'—è–≤–∏–ª–æ—Å—è` –∑–∞ —Å–µ–∫—É–Ω–¥–∏ –ø—ñ—Å–ª—è –ø–æ–¥—ñ—ó.
*   **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≥—Ä–∞—Ñ—ñ–∫—ñ–≤:** –ë–æ—Ç —Ä–æ–∑—É–º—ñ—î –ø–æ—Ç–æ—á–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ —ñ –∫–æ–º–µ–Ω—Ç—É—î –ø–æ–¥—ñ—ó:
    *   *"–°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ, —Ö–æ—á–∞ –∑–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º –º–∞–ª–æ –±—É—Ç–∏ —â–µ 30 —Ö–≤"*
    *   *"–°–≤—ñ—Ç–ª–æ –∑'—è–≤–∏–ª–æ—Å—è —Ä–∞–Ω—ñ—à–µ –Ω–∞ 15 —Ö–≤"*
*   **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:** –ü—Ä–∏ –ø–æ—è–≤—ñ —Å–≤—ñ—Ç–ª–∞ –ø–∏—à–µ, —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –π–æ–≥–æ –Ω–µ –±—É–ª–æ.

### 2. üìä –©–æ–¥–µ–Ω–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ "–ü–ª–∞–Ω vs –§–∞–∫—Ç"
–©–æ–Ω–æ—á—ñ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –≥—Ä–∞—Ñ—ñ—á–Ω–∏–π –∑–≤—ñ—Ç —É —Ç–µ–º–Ω—ñ–π —Ç–µ–º—ñ:
*   **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è:** –î–≤—ñ —á–∞—Å–æ–≤—ñ —à–∫–∞–ª–∏ (–ü–ª–∞–Ω–æ–≤–∞ —Ç–∞ –§–∞–∫—Ç–∏—á–Ω–∞) –æ–¥–Ω–∞ –Ω–∞–¥ –æ–¥–Ω–æ—é.
*   **–¢–æ—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
    *   –°–∫—ñ–ª—å–∫–∏ –≥–æ–¥–∏–Ω —Å–≤—ñ—Ç–ª–∞ –±—É–ª–æ —Ä–µ–∞–ª—å–Ω–æ.
    *   –°–∫—ñ–ª—å–∫–∏ –æ–±—ñ—Ü—è–ª–∏ –∑–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º.
    *   **–í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è:** –ù–∞–ø—Ä–∏–∫–ª–∞–¥, *"-2.5 –≥–æ–¥ (–≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–ª–∞–Ω—É 85%)"*.

### 3. üìÖ –¢–∏–∂–Ω–µ–≤—ñ –∑–≤—ñ—Ç–∏
–©–æ—Ç–∏–∂–Ω—è (—É –ø–æ–Ω–µ–¥—ñ–ª–æ–∫ –≤–Ω–æ—á—ñ) –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –≤–µ–ª–∏–∫–∏–π –∑–≤—ñ—Ç:
*   **–ï–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω–∏–π "–í–µ—Ä–¥–∏–∫—Ç":** –¢–µ–∫—Å—Ç–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑ —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ —Ç–∏–∂–Ω—è (–≤—ñ–¥ "–°–ø–æ–∫—ñ–π–Ω–∏–π" –¥–æ "–í–∞–∂–∫–∏–π").
*   **–Ü–Ω—Ñ–æ–≥—Ä–∞—Ñ—ñ–∫–∞:** –ó–≤–µ–¥–µ–Ω–∞ –¥—ñ–∞–≥—Ä–∞–º–∞ –∑–∞ 7 –¥–Ω—ñ–≤.
*   **–†–µ–π—Ç–∏–Ω–≥ –¥–Ω—ñ–≤:** –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–æ–≥–æ —Ç–∞ –Ω–∞–π–≥—ñ—Ä—à–æ–≥–æ –¥–Ω—è —Ç–∏–∂–Ω—è.

### 4. ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤
*   –°–∫—Ä–∏–ø—Ç –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î API Yasno —Ç–∞ GitHub (–¥–∞–Ω—ñ –≤—ñ–¥ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏).
*   –ü—Ä–∏ –∑–º—ñ–Ω—ñ –≥—Ä–∞—Ñ—ñ–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –≤—ñ–¥–∫–ª—é—á–µ–Ω—å) –Ω–∞–¥—Å–∏–ª–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.

---

## üõ† –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —á–æ—Ç–∏—Ä—å–æ—Ö –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –≤ –æ–¥–Ω—ñ–π –ø–∞–ø—Ü—ñ:

1.  `power_monitor_server.py`: HTTP-—Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π —Å–ª—É—Ö–∞—î "heartbeat" –≤—ñ–¥ –≤–∞—à–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞/–ø—Ä–∏—Å—Ç—Ä–æ—é –≤–¥–æ–º–∞. –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ `üî¥/üü¢` —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è.
2.  `main.py`: –°–∫—Ä–µ–π–ø–µ—Ä –≥—Ä–∞—Ñ—ñ–∫—ñ–≤. –û–Ω–æ–≤–ª—é—î `last_schedules.json` —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—é `schedule_history.json`.
3.  `generate_daily_report.py`: –ì–µ–Ω–µ—Ä—É—î –∫–∞—Ä—Ç–∏–Ω–∫—É –∑–≤—ñ—Ç—É –∑–∞ –≤—á–æ—Ä–∞.
4.  `generate_weekly_report.py`: –ì–µ–Ω–µ—Ä—É—î –∑–≤—ñ—Ç –∑–∞ —Ç–∏–∂–¥–µ–Ω—å.

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

–í–∞–º –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è VPS –∞–±–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π, —â–æ –ø—Ä–∞—Ü—é—î 24/7 (Raspberry Pi), —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π "–º–∞—è—á–æ–∫" –≤–¥–æ–º–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ñ, —â–æ —Å–º–∏–∫–∞—î URL –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É).

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
git clone https://github.com/weby-homelab/light-monitor-kyiv.git
cd light-monitor-kyiv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (.env)
–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`:
```ini
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
TELEGRAM_CHANNEL_ID=-1001234567890
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä—É–ø (config.json)
–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `config.json` –ø—ñ–¥ –≤–∞—à—É —á–µ—Ä–≥—É (–ø—Ä–∏–∫–ª–∞–¥ –¥–ª—è 6 –≥—Ä—É–ø–∏):
```json
{
  "settings": {
    "region": "kiev",
    "groups": ["GPV36.1"], 
    "style": "list"
  },
  ...
}
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —É —Ñ–æ–Ω—ñ (–∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å systemd service):
```bash
./venv/bin/python power_monitor_server.py
```
–í—ñ–Ω —Å—Ç–≤–æ—Ä–∏—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π URL –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é (–¥–∏–≤. –∫–æ–Ω—Å–æ–ª—å –∞–±–æ `power_push_url.txt`). –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–∞—à –¥–æ–º–∞—à–Ω—ñ–π —Ä–æ—É—Ç–µ—Ä (–∞–±–æ —ñ–Ω—à–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π) —Ä–æ–±–∏—Ç–∏ `GET` –∑–∞–ø–∏—Ç –Ω–∞ —Ü–µ–π URL –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É.

### 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Cron (–†–æ–∑–∫–ª–∞–¥)
–î–æ–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—ñ –≤ `crontab -e`:

```cron
# 1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (—â–æ–≥–æ–¥–∏–Ω–∏)
0 * * * * cd /path/to/project && ./venv/bin/python main.py >> cron_scraper.log 2>&1

# 2. –©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç (00:05)
5 0 * * * cd /path/to/project && export $(grep -v '^#' .env | xargs) && ./venv/bin/python generate_daily_report.py >> cron_daily.log 2>&1

# 3. –¢–∏–∂–Ω–µ–≤–∏–π –∑–≤—ñ—Ç (–ü–æ–Ω–µ–¥—ñ–ª–æ–∫ 00:10)
10 0 * * 1 cd /path/to/project && export $(grep -v '^#' .env | xargs) && ./venv/bin/python generate_weekly_report.py >> cron_weekly.log 2>&1
```

---

## üìä –ü—Ä–∏–∫–ª–∞–¥ –∑–≤—ñ—Ç—ñ–≤

### –©–æ–¥–µ–Ω–Ω–∏–π:
> üìä **–ó–≤—ñ—Ç –∑–∞ 12.02.2026**
> üí° –°–≤—ñ—Ç–ª–æ –±—É–ª–æ: **19–≥–æ–¥ 15—Ö–≤**
> ‚ùå –°–≤—ñ—Ç–ª–∞ –Ω–µ –±—É–ª–æ: **4–≥–æ–¥ 44—Ö–≤**
>
> üìâ **–ü–ª–∞–Ω vs –§–∞–∫—Ç:**
> ‚Ä¢ –ó–∞ –ø–ª–∞–Ω–æ–º —Å–≤—ñ—Ç–ª–æ: **10–≥–æ–¥ 00—Ö–≤**
> ‚Ä¢ –†–µ–∞–ª—å–Ω–æ —Å–≤—ñ—Ç–ª–æ: **19–≥–æ–¥ 15—Ö–≤**
> ‚Ä¢ –í—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è: **+9.2–≥–æ–¥** (–°–≤—ñ—Ç–ª–∞ **192%** –≤—ñ–¥ –ø–ª–∞–Ω—É)

---

## üìÇ –§–∞–π–ª–∏ –¥–∞–Ω–∏—Ö

*   `event_log.json`: –Ü—Å—Ç–æ—Ä—ñ—è –≤—Å—ñ—Ö –≤–∫–ª—é—á–µ–Ω—å/–≤–∏–º–∫–Ω–µ–Ω—å (—Ñ–æ—Ä–º—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ).
*   `schedule_history.json`: –ê—Ä—Ö—ñ–≤ –ø–ª–∞–Ω–æ–≤–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ (–¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏).
*   `last_schedules.json`: –ü–æ—Ç–æ—á–Ω–∏–π –∞–∫—Ç—É–∞–ª—å–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫.

---

## ü§ù –ü–æ–¥—è–∫–∞

*   [banditByte](https://github.com/banditByte) –∑–∞ –æ—Å–Ω–æ–≤—É –ø–∞—Ä—Å–µ—Ä–∞ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.
*   –°–ø—ñ–ª—å–Ω–æ—Ç—ñ [outage-data-ua](https://github.com/Baskerville42/outage-data-ua) –∑–∞ API –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.

---
**License:** MIT
