# light-monitor-kyiv

–î–ª—è —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—é—î—Ç—å—Å—è [–ü—É–±–ª—ñ—á–Ω–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö –ø—Ä–æ –ø–ª–∞–Ω–æ–≤—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –≤ –£–∫—Ä–∞—ó–Ω—ñ.](https://github.com/Baskerville42/outage-data-ua/tree/main) —Ç–∞ YASNO (API)

–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —â–æ–≥–æ–¥–∏–Ω–∏ (cron), –∑–±–∏—Ä–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î —É –¢–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª –≥—Ä–∞—Ñ—ñ–∫—ñ –¥–ª—è –æ–¥–Ω–æ—ó –∞–±–æ –¥–µ–∫—ñ–ª—å–∫–æ—Ö —á–µ—Ä–≥ –æ–¥—Ä–∞–∑—É –∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω—å.

–°—Ç–∞—Ä—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è, –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ª–∏—à–µ 3 –æ—Å—Ç–∞–Ω–Ω—ñ—Ö.


–ü—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ –≤–∏–≥–ª—è–¥–∞—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ —É –¢–µ–ª–µ–≥—Ä–∞–º:

============ ‚óâ 12.1 ‚óâ ============

üìÜ  02.02 (–ü–æ–Ω–µ–¥—ñ–ª–æ–∫) [outage-data-ua, yasno]:

üü© 00:00 - 04:00 ‚Ä¶ (4 –≥–æ–¥–∏–Ω–∏)  
üü† 04:00 - 11:00 ‚Ä¶ (7 –≥–æ–¥–∏–Ω)  
üü© 11:00 - 13:00 ‚Ä¶ (2 –≥–æ–¥–∏–Ω–∏)  
üü† 13:00 - 20:30 ‚Ä¶ (7.5 –≥–æ–¥–∏–Ω–∏)  
üü© 20:30 - 22:00 ‚Ä¶ (1.5 –≥–æ–¥–∏–Ω–∏)  
üü† 22:00 - 24:00 ‚Ä¶ (2 –≥–æ–¥–∏–Ω–∏)

üü© –°–≤—ñ—Ç–ª–æ —î: 7.5 –≥–æ–¥–∏–Ω–∏  
üü† –°–≤—ñ—Ç–ª–∞ –Ω–µ–º–∞: 16.5 –≥–æ–¥–∏–Ω–∏

‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†

üìÜ  03.02 (–í—ñ–≤—Ç–æ—Ä–æ–∫) [outage-data-ua, yasno]:

üü† 00:00 - 05:00 ‚Ä¶ (5 –≥–æ–¥–∏–Ω)  
üü© 05:00 - 10:00 ‚Ä¶ (5 –≥–æ–¥–∏–Ω)  
üü† 10:00 - 17:00 ‚Ä¶ (7 –≥–æ–¥–∏–Ω)  
üü© 17:00 - 19:00 ‚Ä¶ (2 –≥–æ–¥–∏–Ω–∏)  
üü† 19:00 - 24:00 ‚Ä¶ (5 –≥–æ–¥–∏–Ω)

üü© –°–≤—ñ—Ç–ª–æ —î: 7 –≥–æ–¥–∏–Ω  
üü† –°–≤—ñ—Ç–ª–∞ –Ω–µ–º–∞: 17 –≥–æ–¥–∏–Ω

============ ‚óâ 18.1 ‚óâ ============

üìÜ  02.02 (–ü–æ–Ω–µ–¥—ñ–ª–æ–∫) [outage-data-ua, yasno]:

üü† 00:00 - 01:30 ‚Ä¶ (1.5 –≥–æ–¥–∏–Ω–∏)  
üü© 01:30 - 07:00 ‚Ä¶ (5.5 –≥–æ–¥–∏–Ω–∏)  
üü† 07:00 - 13:00 ‚Ä¶ (6 –≥–æ–¥–∏–Ω)  
üü© 13:00 - 16:30 ‚Ä¶ (3.5 –≥–æ–¥–∏–Ω–∏)  
üü† 16:30 - 23:30 ‚Ä¶ (7 –≥–æ–¥–∏–Ω)  
üü© 23:30 - 24:00 ‚Ä¶ (0.5 –≥–æ–¥–∏–Ω–∏)

üü© –°–≤—ñ—Ç–ª–æ —î: 9.5 –≥–æ–¥–∏–Ω–∏  
üü† –°–≤—ñ—Ç–ª–∞ –Ω–µ–º–∞: 14.5 –≥–æ–¥–∏–Ω–∏

‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†  ‚ñ†

üìÜ  03.02 (–í—ñ–≤—Ç–æ—Ä–æ–∫) [outage-data-ua, yasno]:

üü© 00:00 - 05:30 ‚Ä¶ (5.5 –≥–æ–¥–∏–Ω–∏)  
üü† 05:30 - 10:30 ‚Ä¶ (5 –≥–æ–¥–∏–Ω)  
üü© 10:30 - 14:00 ‚Ä¶ (3.5 –≥–æ–¥–∏–Ω–∏)  
üü† 14:00 - 21:00 ‚Ä¶ (7 –≥–æ–¥–∏–Ω)  
üü© 21:00 - 24:00 ‚Ä¶ (3 –≥–æ–¥–∏–Ω–∏)

üü© –°–≤—ñ—Ç–ª–æ —î: 12 –≥–æ–¥–∏–Ω  
üü† –°–≤—ñ—Ç–ª–∞ –Ω–µ–º–∞: 12 –≥–æ–¥–∏–Ω

üïê –û–Ω–æ–≤–ª–µ–Ω–æ: 02.02.2026 ‚†Ö18:51 (–ö–∏—ó–≤)


##### –©–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ, –∞–±–∏ –∑–º—É—Å–∏—Ç–∏ –∫–æ–¥ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞ —Å–µ–±–µ:

1. **–ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ü–µ–π GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**  
   (–º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π public repo –≤ –∞–∫–∞—É–Ω—Ç—ñ).

2. **–î–æ–¥–∞—Ç–∏ –¥–≤–∞ —Å–µ–∫—Ä–µ—Ç–∏** –≤ Settings ‚Üí Secrets –¥–ª—è —Ü—å–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:  
   - `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `12345:ABC...`)
   - `TELEGRAM_CHANNEL_ID` ‚Äî chat_id –≤–∞—à–æ–≥–æ –∫–∞–Ω–∞–ª—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `@mychannel` –∞–±–æ —á–∏—Å–ª–æ–≤–∏–π Id `-100...`)

3. **–ü–µ—Ä–µ—Å–≤—ñ–¥—á–∏—Ç–∏—Å—å**, —â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –º–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–∑–≤–æ–ª–∏  
   ("Allow all actions and reusable workflows").

<details>

<summary>Step-by-step guide [English]</summary>

#### What the script creates / updates

*   last\_schedules.json ‚Äî cache of last schedules (used to detect changes).
*   message\_ids.json ‚Äî stores Telegram message ids to delete older messages (keeps up to MAX\_MESSAGES).
*   The GitHub Action tries to commit these files back to the repo so the cache persists between runs.


#### Step-by-step setup (GitHub Actions)

Prerequisites

*   GitHub account.
*   A Telegram bot token and a channel (see step 4).
*   Optional: fork the repository or create a new repo (you can keep it public).

*   Fork or clone the repository
    
    *   Fork on GitHub or clone locally:
        *   git clone [https://github.com/banditByte/light-monitor-kyiv.git](https://github.com/banditByte/light-monitor-kyiv.git)
*   Create (or verify) configuration
    
    *   Edit config.json if you want different groups, region or Yasno IDs. Example keys:
        *   groups ‚Äî list of group names (GPVxx.x) monitored
        *   region ‚Äî region slug used for the outage-data-ua source (default "kyiv")
        *   yasno\_region\_id and yasno\_dso\_id ‚Äî used for the Yasno API
    *   The repo includes a default config.json (shown above). Adjust groups / ids as needed.
*   Create a Telegram bot and channel details
    
    *   Create a bot with BotFather to get TELEGRAM\_BOT\_TOKEN (format like 12345:ABC...).
    *   Create a Telegram channel (or use existing). Add the bot to the channel and give it permission to post (bot must be admin or allowed to post).
    *   To get TELEGRAM\_CHANNEL\_ID:
        *   If you have a public channel username, you can use @yourchannelname.
        *   To get numeric id: send a message to the channel, then call: [https://api.telegram.org/bot](https://api.telegram.org/bot)<TELEGRAM\_BOT\_TOKEN>/getUpdates Look for "chat":{"id": -100XXXXXXXXXX} in the returned json (that -100... value is channel id).
        *   You can also use helper bots like @get\_id\_bot or similar.
*   Add repository secrets (Actions) on GitHub
    
    *   Go to your repo ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret
        *   Add TELEGRAM\_BOT\_TOKEN with the token value.
        *   Add TELEGRAM\_CHANNEL\_ID with the numeric id or @channelusername.
    *   Ensure Actions permissions allow the workflow to run and push cache files:
        *   The workflow sets permission contents: write ‚Äî make sure repository settings do not block write actions.
        *   If the README suggests "Allow all actions and reusable workflows", enable appropriate settings in Settings ‚Üí Actions.
*   Confirm the workflow schedule and behavior
    
    *   The included workflow runs hourly by cron: '0 \*/1 \* \* \*' and also supports manual runs (workflow\_dispatch).
    *   The workflow uses Python 3.11 and installs requirements via pip install -r requirements.txt.
    *   On successful run it executes python main.py and the script will:
        *   Fetch outage-data-ua and Yasno API
        *   Format messages and send to Telegram
        *   Keep last\_schedules.json and message\_ids.json (cache files)
        *   Attempt to commit updated cache files back to the repo (git push || true ‚Äî push is best-effort and may fail if permissions or token are restricted).
*   Test the workflow
    
    *   In the repo on GitHub, open Actions ‚Üí the workflow ‚Üí Run workflow (manual dispatch) to test.
    *   Check Action logs for errors (installation, missing env, network).

</details>

---

–ê–±–∏ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –ø—Ä–æ –∫–æ–¥ –¥–µ—Ç–∞–ª—å–Ω–æ, –¥–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (config.json) –Ω–∞ —á–∏—Ç—ñ–π—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.

##### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó

```bash
light-monitor-kyiv/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ check_outages.yml   # —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó GitHub Actions
‚îú‚îÄ‚îÄ config.json                 # –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≥—Ä—É–ø
‚îú‚îÄ‚îÄ main.py                     # –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥
‚îú‚îÄ‚îÄ requirements.txt            # –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ last_schedules.json         # –∫–µ—à —Ä–æ–∑–∫–ª–∞–¥—ñ–≤ (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îú‚îÄ‚îÄ message_ids.json            # ID –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îî‚îÄ‚îÄ README.md                   # —Ü–µ–π —Ñ–∞–π–ª
```

–î—è–∫—É—é —Å–ø—ñ–ª—å–Ω–æ—Ç—ñ https://t.me/svitlobot_api –∑–∞ —Ç–µ, —â–æ –Ω–∞–≥–∞–¥–∞–ª–∞: *—Ö–æ—á–µ—à, –∞–±–∏ –≤—Å–µ –¥–æ–±—Ä–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ —ñ –±—É–ª–æ, —è–∫ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–∞–º–µ —Ç–æ–±—ñ, –∑—Ä–æ–±–∏ –≤—Å–µ —Å–∞–º* ¬Ø\\_(„ÉÑ)_/¬Ø
